var ue=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var Z=(F,y,m)=>y in F?ue(F,y,{enumerable:!0,configurable:!0,writable:!0,value:m}):F[y]=m,ee=(F,y)=>{for(var m in y||(y={}))se.call(y,m)&&Z(F,m,y[m]);if(Y)for(var m of Y(y))oe.call(y,m)&&Z(F,m,y[m]);return F};import{_ as ie,d as ce,r as G,q as fe,o as q,c as pe,w as Q,a as C,t as M,i as le,u as he,j as ve,br as de,h as ne,k as ge,F as me,b as be,p as Fe,e as ye,ai as R,g as _e,f as Se,M as Ae}from"./BaseLayout.fcf2b1f3.js";import{c as Ce,D as Ee,L as ke,F as Ve}from"./Log.e0a01580.js";var z={exports:{}};(function(F,y){(function(){var m="We could not detect the separator.",w="Empty CSV. Please provide something.",I="Could not detect header. Ensure first row cotains your column headers.",K=[",",";","	"],N={",":"comma",";":"semicolon","	":"tab"};function B(h){var c={},t;return K.forEach(function(o,f){var e=new RegExp(o,"g");c[o]=(h.match(e)||[]).length,t=!t||c[o]>c[t]?o:t}),t}function L(){var h=[].slice.call(arguments),c=h.reduce(function(t,o){return t.length>o.length?t:o},[]);return c.map(function(t,o){return h.map(function(f){return f[o]})})}function j(h){for(var c={},t=0;t<h.length;t++){var o=h[t];c[o]===void 0?c[o]=0:c[o]++}for(var f=[],t=h.length-1;t>=0;t--){var o=h[t];c[o]>0&&(o=o+"__"+c[o]--),f.unshift(o)}return f}function D(h,c){if(c||(c={}),h.length==0)throw w;var t=c.separator||B(h);if(!t)throw m;var o=[];try{var o=H.parse(h,N[t])}catch(k){var f=h.lastIndexOf(`
`,k.offset),e=h.indexOf(`
`,k.offset),g=h.substring(f>=-1?f:0,e>-1?e:h.length);throw k.message+" On line "+k.line+" and column "+k.column+`.
`+g}c.transpose&&(o=L.apply(this,o));var v=o.shift();if(v.length==0)throw I;v=v.map(function(k){return k.trim().replace(/(^")|("$)/g,"")}),v=j(v);for(var u=c.hash?{}:[],x=0;x<o.length;x++){for(var _={},i,E=0;E<v.length;E++){var V=(o[x][E]||"").trim().replace(/(^")|("$)/g,""),U=V===""?NaN:V-0;if(c.hash&&E==0)i=V;else if(c.parseJSON||c.parseNumbers&&!isNaN(U))try{_[v[E]]=JSON.parse(V)}catch{_[v[E]]=V}else _[v[E]]=V}c.hash?u[i]=_:u.push(_)}return u}var H=function(){function h(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var c={parse:function(t,o){var f={comma:x,semicolon:_,tab:i,sv:E,line:V,field:U,char:k};if(o!==void 0){if(f[o]===void 0)throw new Error("Invalid rule name: "+h(o)+".")}else o="comma";var e=0,g=0,v=[];function u(l){e<g||(e>g&&(g=e,v=[]),v.push(l))}function x(){var l,a,n,r;return n=e,r=e,l=function(s){return P=","}()?"":null,l!==null?(a=E(),a!==null?l=[l,a]:(l=null,e=r)):(l=null,e=r),l!==null&&(l=function(s,d){return d}(n,l[1])),l===null&&(e=n),l}function _(){var l,a,n,r;return n=e,r=e,l=function(s){return P=";"}()?"":null,l!==null?(a=E(),a!==null?l=[l,a]:(l=null,e=r)):(l=null,e=r),l!==null&&(l=function(s,d){return d}(n,l[1])),l===null&&(e=n),l}function i(){var l,a,n,r;return n=e,r=e,l=function(s){return P="	"}()?"":null,l!==null?(a=E(),a!==null?l=[l,a]:(l=null,e=r)):(l=null,e=r),l!==null&&(l=function(s,d){return d}(n,l[1])),l===null&&(e=n),l}function E(){var l,a,n,r,s,d,b,p,S;for(d=e,b=e,l=[],/^[\n\r]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,u("[\\n\\r]"));a!==null;)l.push(a),/^[\n\r]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,u("[\\n\\r]"));if(l!==null)if(a=V(),a!==null){if(n=[],p=e,S=e,/^[\n\r]/.test(t.charAt(e))?(s=t.charAt(e),e++):(s=null,u("[\\n\\r]")),s!==null)for(r=[];s!==null;)r.push(s),/^[\n\r]/.test(t.charAt(e))?(s=t.charAt(e),e++):(s=null,u("[\\n\\r]"));else r=null;for(r!==null?(s=V(),s!==null?r=[r,s]:(r=null,e=S)):(r=null,e=S),r!==null&&(r=function(T,A){return A}(p,r[1])),r===null&&(e=p);r!==null;){if(n.push(r),p=e,S=e,/^[\n\r]/.test(t.charAt(e))?(s=t.charAt(e),e++):(s=null,u("[\\n\\r]")),s!==null)for(r=[];s!==null;)r.push(s),/^[\n\r]/.test(t.charAt(e))?(s=t.charAt(e),e++):(s=null,u("[\\n\\r]"));else r=null;r!==null?(s=V(),s!==null?r=[r,s]:(r=null,e=S)):(r=null,e=S),r!==null&&(r=function(T,A){return A}(p,r[1])),r===null&&(e=p)}if(n!==null){for(r=[],/^[\n\r]/.test(t.charAt(e))?(s=t.charAt(e),e++):(s=null,u("[\\n\\r]"));s!==null;)r.push(s),/^[\n\r]/.test(t.charAt(e))?(s=t.charAt(e),e++):(s=null,u("[\\n\\r]"));r!==null?l=[l,a,n,r]:(l=null,e=b)}else l=null,e=b}else l=null,e=b;else l=null,e=b;return l!==null&&(l=function(T,A,O){return O.unshift(A),O}(d,l[1],l[2])),l===null&&(e=d),l}function V(){var l,a,n,r,s,d,b,p,S;if(d=e,b=e,l=U(),l!==null){for(a=[],p=e,S=e,t.length>e?(n=t.charAt(e),e++):(n=null,u("any character")),n!==null?(r=function(T,A){return A==P}(e,n)?"":null,r!==null?(s=U(),s!==null?n=[n,r,s]:(n=null,e=S)):(n=null,e=S)):(n=null,e=S),n!==null&&(n=function(T,A,O){return O}(p,n[0],n[2])),n===null&&(e=p);n!==null;)a.push(n),p=e,S=e,t.length>e?(n=t.charAt(e),e++):(n=null,u("any character")),n!==null?(r=function(T,A){return A==P}(e,n)?"":null,r!==null?(s=U(),s!==null?n=[n,r,s]:(n=null,e=S)):(n=null,e=S)):(n=null,e=S),n!==null&&(n=function(T,A,O){return O}(p,n[0],n[2])),n===null&&(e=p);a!==null?(n=function(T,A,O){return!!A||O.length}(e,l,a)?"":null,n!==null?l=[l,a,n]:(l=null,e=b)):(l=null,e=b)}else l=null,e=b;return l!==null&&(l=function(T,A,O){return O.unshift(A),O}(d,l[0],l[1])),l===null&&(e=d),l}function U(){var l,a,n,r,s,d;if(r=e,s=e,t.charCodeAt(e)===34?(l='"',e++):(l=null,u('"\\""')),l!==null){for(a=[],n=k();n!==null;)a.push(n),n=k();a!==null?(t.charCodeAt(e)===34?(n='"',e++):(n=null,u('"\\""')),n!==null?l=[l,a,n]:(l=null,e=s)):(l=null,e=s)}else l=null,e=s;if(l!==null&&(l=function(b,p){return p.join("")}(r,l[1])),l===null&&(e=r),l===null){for(r=e,l=[],s=e,d=e,/^[^\n\r]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,u("[^\\n\\r]")),a!==null?(n=function(b,p){return p!=P}(e,a)?"":null,n!==null?a=[a,n]:(a=null,e=d)):(a=null,e=d),a!==null&&(a=function(b,p){return p}(s,a[0])),a===null&&(e=s);a!==null;)l.push(a),s=e,d=e,/^[^\n\r]/.test(t.charAt(e))?(a=t.charAt(e),e++):(a=null,u("[^\\n\\r]")),a!==null?(n=function(b,p){return p!=P}(e,a)?"":null,n!==null?a=[a,n]:(a=null,e=d)):(a=null,e=d),a!==null&&(a=function(b,p){return p}(s,a[0])),a===null&&(e=s);l!==null&&(l=function(b,p){return p.join("")}(r,l)),l===null&&(e=r)}return l}function k(){var l,a,n,r;return n=e,r=e,t.charCodeAt(e)===34?(l='"',e++):(l=null,u('"\\""')),l!==null?(t.charCodeAt(e)===34?(a='"',e++):(a=null,u('"\\""')),a!==null?l=[l,a]:(l=null,e=r)):(l=null,e=r),l!==null&&(l=function(s){return'"'}()),l===null&&(e=n),l===null&&(/^[^"]/.test(t.charAt(e))?(l=t.charAt(e),e++):(l=null,u('[^"]'))),l}function ae(l){l.sort();for(var a=null,n=[],r=0;r<l.length;r++)l[r]!==a&&(n.push(l[r]),a=l[r]);return n}function re(){for(var l=1,a=1,n=!1,r=0;r<Math.max(e,g);r++){var s=t.charAt(r);s===`
`?(n||l++,a=1,n=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(l++,a=1,n=!0):(a++,n=!1)}return{line:l,column:a}}var P=",",J=f[o]();if(J===null||e!==t.length){var $=Math.max(e,g),te=$<t.length?t.charAt($):null,X=re();throw new this.SyntaxError(ae(v),te,$,X.line,X.column)}return J},toSource:function(){return this._source}};return c.SyntaxError=function(t,o,f,e,g){function v(u,x){var _,i;switch(u.length){case 0:_="end of input";break;case 1:_=u[0];break;default:_=u.slice(0,u.length-1).join(", ")+" or "+u[u.length-1]}return i=x?h(x):"end of input","Expected "+_+" but "+i+" found."}this.name="SyntaxError",this.expected=t,this.found=o,this.message=v(t,o),this.offset=f,this.line=e,this.column=g},c.SyntaxError.prototype=Error.prototype,c}();F.exports&&(y=F.exports=D),y.csv2json=D}).call(Ce)})(z,z.exports);var Oe=z.exports;const W=F=>(Fe("data-v-c9129a00"),F=F(),ye(),F),xe=W(()=>C("span",null,"\u5546\u54C1\u8FC1\u79FB\u5DE5\u5177",-1)),we={class:"center"},Be=W(()=>C("h3",null,"\u5546\u54C1\u8FC1\u79FB\u5DE5\u5177",-1)),Te={class:"form"},Ie={class:"form-item"},Ne=R(" \u4E0A\u4F20\u7684\u6587\u4EF6\u4E3A "),Pe=R(" \u5546\u54C1\u6570\u636E\uFF0C "),Ue=W(()=>C("br",null,null,-1)),Ge=R(" \u8BF7\u9009\u62E9\u60F3\u5BFC\u51FA\u7684\u5E73\u53F0\uFF1A "),je=["value","disabled"],Le={class:"btn-group center"},De=ce({__name:"index",setup(F){const y=G([]),m=fe("_message"),w=G([{name:"shopline",value:"shopline"},{name:"shopify",value:"shopify"}]),I=G(w.value[0].value),K=()=>{},N=G([]),B=G("--"),L=G("--");let j=[];const D=async o=>{const f=ee({},[...N.value][0]).file;L.value=f.name;const e=await H(f),g=e[0];if(Object.keys(g).includes("Product description html"))B.value=w.value[0].value;else if(Object.keys(g).includes("Body (HTML)"))B.value=w.value[1].value;else return m({type:"warning",value:"\u4E0A\u4F20\u7684\u6587\u4EF6\u672A\u88AB\u8BC6\u522B\uFF0C\u8BF7\u8054\u7CFB\u535A\u4E3B..."}),N.value=[],!1;I.value=w.value.filter(v=>v.value!=B.value)[0].value,N.value=[],j=e},H=async o=>new Promise((f,e)=>{const g=new FileReader;g.readAsText(o),g.onload=function(){if(typeof g.result=="string"){const v=Oe.csv2json(g.result,{parseNumbers:!1});f(v)}else e("File Error!")}}),h=["Handle","Title","Body (HTML)","Vendor","Product Category","Type","Tags","Published","Option1 Name","Option1 Value","Option2 Name","Option2 Value","Option3 Name","Option3 Value","Option4 Name","Option4 Value","Variant SKU","Variant Grams","Variant Inventory Tracker","Variant Inventory Qty","Variant Inventory Policy","Variant Fulfillment Service","Variant Price","Variant Compare At Price","Variant Requires Shipping","Variant Taxable","Variant Barcode","Image Src","Image Position","Image Alt Text","Gift Card","SEO Title","SEO Description","Google Shopping / Google Product Category","Google Shopping / Gender","Google Shopping / Age Group","Google Shopping / MPN","Google Shopping / Condition","Google Shopping / Custom Product","Google Shopping / Custom Label 0","Google Shopping / Custom Label 1","Google Shopping / Custom Label 2","Google Shopping / Custom Label 3","Google Shopping / Custom Label 4","Variant Image","Variant Weight Unit","Variant Tax Code","Cost per item"];function c(o,f){const e=",",g=`
`;let v=[];switch(f){case"shopline":break;case"shopify":v=[h.join(e)].concat(o.map((u,x)=>h.map(_=>{let i="";switch(_){case"Title":i=u["Title*"];break;case"Body (HTML)":i=u["Product description html"];break;case"Product Category":i=u.Collections;break;case"Published":i="TRUE";break;case"Option1 Name":i=u["Option1 name"];break;case"Option1 Value":i=u["Option1 value"];break;case"Option2 Name":i=u["Option2 name"];break;case"Option2 Value":i=u["Option2 value"];break;case"Option3 Name":i=u["Option3 name"];break;case"Option3 Value":i=u["Option3 value"];break;case"Option4 Name":i=u["Option4 name"];break;case"Option4 Value":i=u["Option4 value"];break;case"Variant SKU":i=u.SKU;break;case"Variant Grams":i="300";break;case"Variant Inventory Tracker":i="shopify";break;case"Variant Inventory Qty":i=u["SKU Inventory Quantity"]&&u["SKU Inventory Quantity"]!=0?u["SKU Inventory Quantity"]:"500";break;case"Variant Inventory Policy":i="continue";break;case"Variant Fulfillment Service":i="manual";break;case"Variant Price":i=u["SKU price"];break;case"Variant Compare At Price":i=u["SKU compare at price"]&&u["SKU compare at price"]!="0"?u["SKU compare at price"]:u["SKU price"];break;case"Variant Requires Shipping":i="TRUE";break;case"Variant Taxable":i="FALSE";break;case"Variant Barcode":i=u["Barcode (ISBN,UPC,GTIN,etc.)"];break;case"Image Src":i=u["Master image"];break;case"Image Position":i=u["Master image"]?(x+1).toString():"";break;case"Image Alt Text":i=u["Title*"]+u.Tags;break;case"Gift Card":i="FALSE";break;case"SEO Title":i=u["SEO title"];break;case"SEO Description":i=u["SEO description"];break;case"Variant Image":i=u.Image;break;case"Variant Weight Unit":i="g";break;default:i=u[_];break}return i&&i!=""?`"${i.replace(/"/g,'\\"')}"`:""}).join(e)));break}return console.log(v),v.join(g)}const t=async()=>{j.length===0&&m({type:"error",value:"\u6570\u636E\u4E3A\u7A7A\uFF01"});const o=c(j,I.value),f="\uFEFF",e=new Blob([f+o],{type:"text/csv;charset=utf-8;"});await Ve.exports.saveAs(e,`${L.value}-${B.value}-${_e()}.csv`),m({type:"success",value:"\u4E0B\u8F7D\u6210\u529F..."})};return(o,f)=>(q(),pe(be,null,{header:Q(()=>[xe]),main:Q(()=>[C("div",we,[C("header",null,[Be,C("p",null," \u73B0\u5DF2\u652F\u6301\uFF1A "+M(w.value.map(e=>e.name.toLocaleUpperCase()).join("\u3001"))+" \u5E73\u53F0\u4E92\u76F8\u5BFC\u5165\u5BFC\u51FA ",1)]),C("div",null,[le(he(Ee),{value:N.value,"onUpdate:value":f[0]||(f[0]=e=>N.value=e),max_size:1024*50,onChange:D,ref:"dropFile",multiple:!1,file_type:["text/csv"]},null,8,["value"])]),C("div",Te,[C("div",Ie,[C("span",null,[Ne,C("strong",null,M(B.value),1),Pe,Ue,Ge]),ve(C("select",{onChange:K,"onUpdate:modelValue":f[1]||(f[1]=e=>I.value=e)},[(q(!0),ne(me,null,ge(w.value,e=>(q(),ne("option",{key:e.value,value:e.value,disabled:e.value===B.value},M(e.name.toLocaleUpperCase()),9,je))),128))],544),[[de,I.value]])])]),C("div",Le,[C("button",{class:"button D large",onClick:t}," \u5BFC\u51FA"+M(I.value.toLocaleUpperCase()),1)])])]),footer:Q(()=>[le(ke,{logs:y.value},null,8,["logs"])]),_:1}))}});var Me=ie(De,[["__scopeId","data-v-c9129a00"]]);Se(Me).use(Ae).mount("#app");
