(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{657:function(t,a,e){"use strict";e.r(a);var n=e(10),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("一篇文章说清楚 node 的包管理工具的版本兼容与使用须知")]),t._v(" "),e("h2",{attrs:{id:"简短不看版"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简短不看版"}},[t._v("#")]),t._v(" 简短不看版")]),t._v(" "),e("p",[t._v("使用Node版本低于12的旧项目，建议用yarn；新项目建议使用pnpm。")]),t._v(" "),e("h2",{attrs:{id:"概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),e("p",[e("strong",[t._v("npm")]),t._v(" / "),e("strong",[t._v("yarn")]),t._v(" / "),e("strong",[t._v("pnpm")]),t._v(" 可以看作是给Node项目用的命令行版应用商店。")]),t._v(" "),e("p",[e("strong",[t._v("Corepack")]),t._v(" 是管理包管理工具版本的工具")]),t._v(" "),e("h3",{attrs:{id:"对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#对比"}},[t._v("#")]),t._v(" 对比")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Node")]),t._v(" "),e("th",[t._v("特点")]),t._v(" "),e("th",[t._v("速度")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("npm ❤️")]),t._v(" "),e("td",[t._v("版本可能不固定 node自带")]),t._v(" "),e("td",[t._v("树形的依赖 每层级都会下载一遍 慢")])]),t._v(" "),e("tr",[e("td",[t._v("npm >=3")]),t._v(" "),e("td",[t._v("版本可能不固定 node自带")]),t._v(" "),e("td",[t._v("先遍历树 然后平铺依赖 遍历到重复的部分会减少下载量 较慢")])]),t._v(" "),e("tr",[e("td",[t._v("yarn")]),t._v(" "),e("td",[t._v("yarn.lock 锁定版本 安全")]),t._v(" "),e("td",[t._v("异步安装 缓存包支持离线下载 稍快")])]),t._v(" "),e("tr",[e("td",[t._v("pnpm")]),t._v(" "),e("td",[t._v("包只存一份，所有项目都能引用")]),t._v(" "),e("td",[t._v("越用越快")])])])]),t._v(" "),e("h2",{attrs:{id:"包版本管理与兼容性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#包版本管理与兼容性"}},[t._v("#")]),t._v(" 包版本管理与兼容性")]),t._v(" "),e("p",[t._v("各个包管理工具版本与Node版本兼容表")]),t._v(" "),e("h3",{attrs:{id:"npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[t._v("#")]),t._v(" npm")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://nodejs.org/zh-cn/download/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方兼容说明"),e("OutboundLink")],1)]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Node")]),t._v(" "),e("th",[t._v("npm")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("18 - 20")]),t._v(" "),e("td",[t._v("9.X")])]),t._v(" "),e("tr",[e("td",[t._v("16 - 17")]),t._v(" "),e("td",[t._v("8.X")])]),t._v(" "),e("tr",[e("td",[t._v("15")]),t._v(" "),e("td",[t._v("7.X")])]),t._v(" "),e("tr",[e("td",[t._v("<14")]),t._v(" "),e("td",[t._v("6.X")])])])]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 因为是node自带的 所以在切换node时候会切换")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" n "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.0")]),t._v(".1\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("blockquote",[e("p",[t._v("用"),e("strong",[t._v("n命令")]),t._v("切换node版本时会出现 npm不自动切换的问题。\n处理方法：使用sudo n来安装对应版本的node")])]),t._v(" "),e("h3",{attrs:{id:"yarn"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[t._v("#")]),t._v(" yarn")]),t._v(" "),e("p",[t._v("Yarn v1 "),e("a",{attrs:{href:"https://github.com/yarnpkg/yarn/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("版本日志"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://classic.yarnpkg.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方兼容说明"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("兼容node版本：^4.8.0 || ^5.7.0 || ^6.2.2 || >=8.0.0")]),t._v(" "),e("p",[t._v("Yarn v2 "),e("a",{attrs:{href:"https://github.com/yarnpkg/berry/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("版本日志"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://yarnpkg.com/getting-started/migration#upgrade-to-nodejs-12x-or-newer",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方兼容说明"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("兼容node版本：>12.x")]),t._v(" "),e("h3",{attrs:{id:"pnpm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[t._v("#")]),t._v(" pnpm")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://pnpm.io/zh/installation#%E5%85%BC%E5%AE%B9%E6%80%A7",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方兼容说明"),e("OutboundLink")],1)]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Node")]),t._v(" "),e("th",[t._v("pnpm 5")]),t._v(" "),e("th",[t._v("pnpm 6")]),t._v(" "),e("th",[t._v("pnpm 7")]),t._v(" "),e("th",[t._v("pnpm 8")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("12")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("❌")]),t._v(" "),e("td",[t._v("❌")])]),t._v(" "),e("tr",[e("td",[t._v("14")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("❌")])]),t._v(" "),e("tr",[e("td",[t._v("16")]),t._v(" "),e("td",[t._v("未知")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")])]),t._v(" "),e("tr",[e("td",[t._v("18")]),t._v(" "),e("td",[t._v("未知")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")]),t._v(" "),e("td",[t._v("✔️")])])])]),t._v(" "),e("ol",[e("li",[t._v("使用 Corepack / npx 或其他工具切换")]),t._v(" "),e("li",[t._v("官方方法")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dlx pnpm@7 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dlx pnpm@7 run dev:all\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])])]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dlx pnpm@7 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dlx pnpm@7 run dev:all\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("h2",{attrs:{id:"corepack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#corepack"}},[t._v("#")]),t._v(" Corepack")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://nodejs.org/api/corepack.html#upgrading-the-global-versions",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/c239ed5dedd6",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文文档"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Node.js 版本 >= v16.13 时 先开启再切换")]),t._v("\ncorepack "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定版本")]),t._v("\ncorepack prepare pnpm@"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --activate\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Node.js 版本 >= v16.17 才能使用以下命令")]),t._v("\ncorepack prepare pnpm@latest --activate\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);